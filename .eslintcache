[{"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/index.js":"1","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/App.js":"2","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/reportWebVitals.js":"3","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/contexts/AuthContext.js":"4","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/Dashboard.js":"5","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/PrivateRoute.js":"6","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/auth/SignUp.js":"7","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/auth/Login.js":"8","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/firebase.js":"9","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/content/DesignerContent.js":"10","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/content/CustomerContent.js":"11","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/projectComponents/AddPage.js":"12","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/projectComponents/DesignsView.js":"13","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/ProjectPage.js":"14"},{"size":336,"mtime":1608930247126,"results":"15","hashOfConfig":"16"},{"size":900,"mtime":1608930231030,"results":"17","hashOfConfig":"16"},{"size":362,"mtime":1608542451553,"results":"18","hashOfConfig":"16"},{"size":1529,"mtime":1608931282408,"results":"19","hashOfConfig":"16"},{"size":1966,"mtime":1608933518422,"results":"20","hashOfConfig":"16"},{"size":540,"mtime":1608932565420,"results":"21","hashOfConfig":"16"},{"size":3657,"mtime":1608979230556,"results":"22","hashOfConfig":"16"},{"size":2072,"mtime":1608978423006,"results":"23","hashOfConfig":"16"},{"size":558,"mtime":1608929801068,"results":"24","hashOfConfig":"16"},{"size":3326,"mtime":1608936124653,"results":"25","hashOfConfig":"16"},{"size":2735,"mtime":1608978399738,"results":"26","hashOfConfig":"16"},{"size":3044,"mtime":1608935658219,"results":"27","hashOfConfig":"16"},{"size":2456,"mtime":1608935725747,"results":"28","hashOfConfig":"16"},{"size":5155,"mtime":1608935741031,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"12xijbw",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"32"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"32"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"32"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"32"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"32"},"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/index.js",[],["64","65"],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/App.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/reportWebVitals.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/contexts/AuthContext.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/Dashboard.js",["66"],"import React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useAuth } from '../contexts/AuthContext'\nimport firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport DesignerContent from './content/DesignerContent'\nimport CustomerContent from './content/CustomerContent'\n\n\nexport default function Dashboard() {\n    const [error, setError] = useState('')\n    const { currentUser, logout } = useAuth()\n    const history = useHistory()\n    const [role, setRole] = useState('')\n    \n    useEffect(() => {\n        firebase.database().ref('/users/'+currentUser.uid).on(\"value\", (snapshot) => {\n            //Settare lo stato role per determinare il contenuto della dashboard\n            setRole(snapshot.val().role);\n        });\n    }, [])\n\n    \n    //Funzione per loggare out, logout() da contesto\n    async function handleLogout(){\n        setError('')\n        try {\n            await logout()\n            history.push('/login')\n        }catch {\n            setError('Failed to Logout')\n        }\n    }\n\n\n    //Load dashboard in base al ruolo dell'utente\n    function LoadGraph(){\n        if(role === 'customer'){\n            return <CustomerContent />\n        } else if (role === 'designer'){\n            return <DesignerContent />\n        }\n    }\n\n    return (\n        <div className=\"App container d-flex align-items-center justify-content-center\">\n            <div className =\"w-100\" style = {{maxWidth: \"500px\"}}>\n                <div className = \"card\">      \n                    {role && <LoadGraph />}\n                    {error && <div className = \"alert alert-danger\">{error}</div>}\n                    <strong>Email: {currentUser.email}</strong> \n                    <div className = \"w-100 text-center mt-2\">\n                        <button className = \"btn btn-warning\" onClick = {handleLogout}>Log Out</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/PrivateRoute.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/auth/SignUp.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/auth/Login.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/firebase.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/content/DesignerContent.js",["67"],"import React, { useState, useEffect } from 'react'\nimport AddPage from '../projectComponents/AddPage'\nimport { useAuth } from '../../contexts/AuthContext'\nimport firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport 'firebase/storage';\nimport { useHistory } from 'react-router-dom'\n\nexport default function DesignerContent() {\n    const [adding, setAdding] = useState(false)\n    const [buttonSign, setButtonSign] = useState('+')\n    const { currentUser } = useAuth()\n    const [designs, setDesigns] = useState([]);\n    let counter = 0; //Sempre per l'unique key del map\n    const history = useHistory()\n\n    useEffect(()=>{\n         loadProjects()\n    }, [])\n\n    //Stessa funzione di projectComponents/DesignView.js\n    function loadProjects(){\n        var projects = firebase.database().ref('/projects');\n        projects.on('value', (snapshot)=>{\n            let dsgn = []\n            snapshot.forEach((snap)=>{\n                const projectsObject = snap.val();\n                if(currentUser.uid === snap.key){\n                    for (var key in projectsObject){\n                        if (projectsObject.hasOwnProperty(key)){\n                            projectsObject[key].uid= currentUser.uid\n                            projectsObject[key].pid= key\n                            dsgn.push(projectsObject[key])\n                        }\n                    }\n                }\n            })\n            setDesigns(designs => dsgn)\n        })\n    }\n\n    //Funzione per gestire il bottone di aggiunta progetto\n    function handleClick(){\n        if(adding){\n            setAdding(false)\n            setButtonSign('+')\n        }else {\n            setAdding(true)\n            setButtonSign('-')\n        }\n    }\n\n    function handleProjectClick(props){\n        history.push({\n            pathname:'/project',\n            //props di ProjectPage.js\n            project: {uid: props.uid,\n                      pid: props.pid,\n                      title: props.title,\n                      url: props.pr,\n                      description: props.description\n                    }\n        })\n    }\n\n    //Funzione per eliminare un progetto\n    function deleteProject(props){\n        //Rimuove dati del progetto dal db\n        firebase.database().ref('/projects/'+currentUser.uid+'/'+props.pid).remove()\n        //Rimuove file da storage\n        firebase.storage().ref().child('/'+currentUser.uid+'/'+props.name).delete()\n    }\n\n    return (\n        <div>\n            <h2>Projects:</h2>\n            <div className='projectSection'>\n                {designs.map((project)=>{\n                    return <div className='card p-1 w-75 mx-auto mb-3'  key = {counter++}>\n                        {project.title}\n                        <p>\n                            <button onClick={()=>deleteProject(project)} className='btn btn-outline-danger w-25 mx-auto mt-2' >delete</button>\n                            <button onClick={()=>handleProjectClick(project)} className='btn btn-outline-primary w-25 mx-auto mt-2' >open</button>\n                        </p>\n                    </div>\n                        \n                })}\n            </div>\n            <button onClick = {handleClick} className = 'btn btn-outline-primary w-100 '>{buttonSign}</button>\n            {adding && <AddPage />}\n        </div>\n    )\n}\n\n\n\n","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/content/CustomerContent.js",[],"/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/projectComponents/AddPage.js",["68"],"import React, { useRef, useState, useEffect }  from 'react'\nimport  firebase from 'firebase/app';\nimport 'firebase/storage';\nimport \"firebase/database\";\nimport { useAuth } from '../../contexts/AuthContext'\n\n//Sezione per aggiungere un progetto\nexport default function AddPage() {\n    const titleRef = useRef()\n    const descriptionRef = useRef()\n    const designRef = useRef()\n    const [fileUrl, setFileUrl] = useState()\n    const { currentUser } = useAuth()\n    const [loading, setLoading] = useState(false)\n    const [fileName, setFileName] = useState('')\n\n\n    //funzione per caricare i file nello storage di firebase\n    const handleFileChange = async (e) =>{\n        //Loading necessario per disabilitare submit button mentre si sta caricano il file\n        setLoading(true)\n        const file = e.target.files[0]\n        //nello storage ogni user ha una cartella con il proprio user id\n        const storageRef = firebase.storage().ref('/'+currentUser.uid)\n        //crea referenza al file stesso con il suo nome (potrebbe creare problemi se\n        //si uplodano due projetti diversi con lo stesso nome dallo stesso user)\n        const fileRef = storageRef.child(file.name)\n        await fileRef.put(file)\n        setFileName(file.name)\n        setFileUrl(await fileRef.getDownloadURL())\n        setLoading(false)\n    }\n\n    //Funzione per submittare il progetto\n    //TODO provare ad unirla con handleFileChange per evitare che l'utente aggiunga\n    //un progetto allo storage senza però concludere il procedimento di aggiunta project\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        //push crea id unico per ogni progetto nel database per poi poter usare questi\n        //dati in altri componenti\n        firebase.database().ref('/projects/' + currentUser.uid ).push({\n            title: titleRef.current.value,\n            description: descriptionRef.current.value,\n            pr: fileUrl,\n            name: fileName\n        })\n        //Pulizia form\n        titleRef.current.value=''\n        descriptionRef.current.value=''\n        designRef.current.value=null\n    }\n    \n    return (\n        <div>\n            <form onSubmit={handleSubmit}>\n                <label htmlFor = \"title\" className=\"form-label\">Project title</label>\n                <input ref = {titleRef} className=\"form-control\" type=\"text\" id=\"title\" required/>\n                \n                <label htmlFor = \"description\" className=\"form-label\">Project description</label>\n                <input ref = {descriptionRef} className=\"form-control\" type=\"text\" id=\"description\" required/>\n                \n                <p className='mt-2'><label htmlFor = \"design\" className=\"form-label\">Design File</label></p>\n                <input onChange={handleFileChange} ref = {designRef}  type=\"file\" id=\"design\" required/>\n                \n                <button disabled = {loading} className = 'btn btn-outline-primary m-3'>Submit Project</button>\n                <p hidden = {!loading}>Loading...</p>\n            </form>\n        </div>\n    )\n}\n","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/projectComponents/DesignsView.js",["69"],"import React, { useEffect, useState } from 'react'\nimport firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport { useHistory } from 'react-router-dom'\n\n//componente per caricare i designs del designer scelto dal customer attuale\nexport default function DesignsView(props) {\n    const [designs, setDesigns] = useState([]); //array di oggetti (props di handleProject)\n    let counter = 0 //per unique key in map component\n    const history = useHistory()\n\n    useEffect(()=>{\n        loadProjects()\n    }, [])\n\n    //funzione per caricare i progetti\n    function loadProjects(){\n        var projects = firebase.database().ref('/projects');\n        projects.on('value', (snapshot)=>{\n            let dsgn = []\n            snapshot.forEach((snap)=>{\n                //snap.val è un array di oggetti {key: {progetto}}, ogni progetto ha una key unica\n                const projectsObject = snap.val();\n                //snap.key è l'id dell'utente a cui appartengono i progetti\n                //se l'id del deisgner selezionato dalla dashboard corrisponde a quello dello snap\n                //i progetti nello snap verranno caricati\n                if(props.id === snap.key){\n                    for (var key in projectsObject){\n                        if (projectsObject.hasOwnProperty(key)){\n                            //aggiunta di alcune proprietà utili all'oggetto\n                            projectsObject[key].uid= props.id //id dell'autore del progetto\n                            projectsObject[key].pid= key      //id del progetto\n                            dsgn.push(projectsObject[key])\n                        }\n                    }\n                }\n            })\n            setDesigns(designs => dsgn)\n        })\n    }\n\n    //funzione per caricare la pagina del progetto con props necessarie\n    function handleProject(props){\n        history.push({\n            pathname:'/project',\n            //props di ProjectPage.js\n            project: {uid: props.uid,\n                      pid: props.pid,\n                      title: props.title,\n                      url: props.pr,\n                      description: props.description\n                    }\n        })\n    }\n\n    return (\n        <div>\n            {designs.map((project)=>{\n                return <p onClick = {()=>handleProject(project)} className='card clickable p-1 w-75 mx-auto mb-3' key = {counter++}>{project.title}</p>\n            })}\n        </div>\n    )\n}\n","/home/tullio/Desktop/lavoro/VLK/projects/designapp/src/components/ProjectPage.js",["70","71","72"],"import React , { useEffect, useState, useRef }from 'react'\nimport firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport { useAuth } from '../contexts/AuthContext'\nimport { useHistory } from 'react-router-dom'\n\n//Pagina dove viene caricato il progetto\n//props da DesignView.js\nexport default function ProjectPage(props) {\n    const { currentUser } = useAuth()\n    const [author, setAuthor] = useState({})\n    const commentRef = useRef()\n    const history = useHistory()\n    const[comments, setComments] = useState([])\n    const[commenter, setCommenter] = useState({})\n    let counter = 0 //per settare key unica per il map dei commenti\n\n    useEffect(()=>{\n        retrieveAuthor();\n        retrieveComments()\n        retrieveCommenter()\n    }, [])\n\n    function retrieveAuthor(){\n        //Funzione per fetchare nome e cognome dell'autore del progetto\n        if(props.location.project){\n            var user = firebase.database().ref('/users/'+props.location.project.uid)\n            user.once('value', (snapshot) => {\n                setAuthor({name: snapshot.val().name, \n                           surname: snapshot.val().surname})\n            })\n        }\n    }\n\n    function retrieveComments(){\n        //Funzione per fetchare i commenti\n        if(props.location.project){\n            var comments = firebase.database().ref('/projects/'+props.location.project.uid + '/' + props.location.project.pid+'/comments');\n            comments.on('value', (snapshot)=>{\n                let msgs = [];\n                snapshot.forEach((snap)=>{\n                    //pushare i commenti in un array temporaneo e successivamente allo stato\n                    msgs.push(snap.val());\n                })\n                setComments(comments => msgs);\n            })\n        }\n    }\n\n    function retrieveCommenter(){\n        //Funzione per fetchare e settare nome e cognome del current user per i nuove commenti\n        var commentAuthor = firebase.database().ref('/users/'+currentUser.uid).on('value', (snapshot)=>{\n            setCommenter({name: snapshot.val().name, \n                          surname: snapshot.val().surname})\n        })\n    }\n\n    const handleSubmit = (e) =>{\n        e.preventDefault()\n        //pushare commento nel db\n        firebase.database().ref('/projects/'+ props.location.project.uid + '/' + props.location.project.pid +'/comments/').push({\n            author: commenter.name + ' ' +commenter.surname,\n            comment: commentRef.current.value\n        })\n        //ripulire input section\n        commentRef.current.value = ''\n    }\n\n    //Torna alla dashborad\n    const handleBack = (e) =>{\n        e.preventDefault()\n        history.push('/')\n    }\n\n    if(! props.location.project){\n        //pushar dashboard se l'utenta entra nella pagina del progetto senza selezionarne uno prima\n        history.push('/')\n        return <div>No project selected</div>\n    }else {\n        return (            \n            <div>\n                <div className='row w-100 h-100'>\n                    <div className='col card m-3 ml-4 p-3'>\n                        <div className='row text-center align-item-center mx-auto'>Comment Section</div>\n                        <div className='p-1 commentSection'>\n                            {comments && comments.map(comment=>{\n                                return <div className='card p-1 w-100 mx-auto mb-3' key={counter++} >\n                                            <p className='card-text'>{comment.comment}</p> \n                                            <p className='card-text'><em>{comment.author}</em></p> \n                                       </div>\n                            })}\n                        </div>\n                        <form onSubmit = {handleSubmit}>\n                        <div className=\"input-group mb-3\">\n                            <input ref= {commentRef} type=\"text\" className=\"form-control\" placeholder=\"Your comment...\" aria-label=\"Recipient's username\" aria-describedby=\"basic-addon2\"/>\n                            <div className=\"input-group-append\">\n                                <button className=\"btn btn-outline-secondary\">Add</button>\n                            </div>\n                        </div>\n                        </form>\n                    </div>\n                    <div className='col-9'>\n                        <div className = 'row'>\n                            <div className='col'><strong>Title: </strong>{props.location.project.title}</div>\n                            <div className='col'><strong>Description: </strong>{props.location.project.description}</div>\n                            <div className='col'><strong>Author: </strong>{author.name} {author.surname}</div>\n                        </div>\n                        <div className='row card text-center align-item-center '>\n                            <img className=' mx-auto w-100 h-100' src={props.location.project.url} />\n                            <button onClick={handleBack} className='btn btn-warning'>Go back...</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )}\n    }",{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":21,"column":8,"nodeType":"79","endLine":21,"endColumn":10,"suggestions":"80"},{"ruleId":"77","severity":1,"message":"81","line":19,"column":8,"nodeType":"79","endLine":19,"endColumn":10,"suggestions":"82"},{"ruleId":"83","severity":1,"message":"84","line":1,"column":35,"nodeType":"85","messageId":"86","endLine":1,"endColumn":44},{"ruleId":"77","severity":1,"message":"81","line":14,"column":8,"nodeType":"79","endLine":14,"endColumn":10,"suggestions":"87"},{"ruleId":"77","severity":1,"message":"88","line":22,"column":8,"nodeType":"79","endLine":22,"endColumn":10,"suggestions":"89"},{"ruleId":"83","severity":1,"message":"90","line":52,"column":13,"nodeType":"85","messageId":"86","endLine":52,"endColumn":26},{"ruleId":"91","severity":1,"message":"92","line":109,"column":29,"nodeType":"93","endLine":109,"endColumn":102},"no-native-reassign",["94"],"no-negated-in-lhs",["95"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'currentUser.uid'. Either include it or remove the dependency array.","ArrayExpression",["96"],"React Hook useEffect has a missing dependency: 'loadProjects'. Either include it or remove the dependency array.",["97"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar",["98"],"React Hook useEffect has missing dependencies: 'retrieveAuthor', 'retrieveCommenter', and 'retrieveComments'. Either include them or remove the dependency array.",["99"],"'commentAuthor' is assigned a value but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation",{"desc":"100","fix":"101"},{"desc":"102","fix":"103"},{"desc":"102","fix":"104"},{"desc":"105","fix":"106"},"Update the dependencies array to be: [currentUser.uid]",{"range":"107","text":"108"},"Update the dependencies array to be: [loadProjects]",{"range":"109","text":"110"},{"range":"111","text":"110"},"Update the dependencies array to be: [retrieveAuthor, retrieveCommenter, retrieveComments]",{"range":"112","text":"113"},[783,785],"[currentUser.uid]",[666,668],"[loadProjects]",[515,517],[755,757],"[retrieveAuthor, retrieveCommenter, retrieveComments]"]